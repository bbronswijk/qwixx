// Error are caused by Prisma plugin in Intelij IDE. Does not support Prisma 7
datasource db {
  provider = "postgresql"
}

generator client {
  provider = "prisma-client"
  output   = "./generated/prisma"
}

model Game {
  id         String            @id @default(uuid()) @db.Uuid
  pin        Int
  variant    String
  createdAt  DateTime          @default(now())
  finishedAt DateTime?
  scores     PlayerGameScore[]
}

model PlayerGameScore {
  id       String @id @default(uuid()) @db.Uuid
  gameId   String @db.Uuid
  nickname String
  score    Int?
  state    Json?
  Game     Game   @relation(fields: [gameId], references: [id], onDelete: Cascade)

  @@unique([gameId, nickname], name: "unique_player_game")
}
